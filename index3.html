<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Zone Entries Overview</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
<style type="text/css">

/*
.axis path,
.axis line {
    fill: none;
    stroke: black;
    shape-rendering: crispEdges;
}

.axis text {
    font-family: sans-serif;
    font-size: 11px;
}
*/
div.team {
    display: inline-block;
    width: 35px;
    height: 35px;  /* Gets overriden by D3-assigned height */
    margin-right: 2px;
    background-size: contain;
}

</style>
</head>
<body>

<!--
<h2>Zone Entries Overview</h2>
<p>This is a data visualization showing team and individual zone entries</p>
<div>
<input type="button" id="playerbtn" value="See Player View">
<input type="button" id="teambtn" value="See Team View">
</div> -->


<div id="team-circles">
</div>



<script type="text/javascript">


//Load the TEAM data set
var teamdata = d3.tsv("team.tsv", function(error, teamdata) {
  if (error) throw error;

  teamdata.forEach(function(d) {
    d.entriesper60 = +d.entriesper60;
    d.carryinpercent = +d.carryinpercent;
    d.hex = +d.hex;
  });

var margin = {top: 20, right: 20, bottom: 30, left: 40};
var w = 960 - margin.left - margin.right;
var h = 500 - margin.top - margin.bottom;

//Create scale functions
var xScale = d3.scale.linear()
    .range([0, w]);

var yScale = d3.scale.linear()
    .range([h, 0]);

// Define the Axis
var xAxis = d3.svg.axis()
    .scale(xScale)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(yScale)
    .orient("left");

//Set up SVG and axis//
var svg = d3.select("body")
            .append("svg")
            .attr("width", w + margin.left + margin.right)
            .attr("height", h + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

//Create X axis
svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + h + ")")
      .call(xAxis)
    .append("text")
      .attr("class", "label")
      .attr("x", w)
      .attr("y", -6)
      .style("text-anchor", "end")
      .text("Carry-in %");

//Create Y axis
svg.append("g")
    .attr("class", "y axis")
    .call(yAxis)
  .append("text")
    .attr("class", "label")
    .attr("transform", "rotate(-90)")
    .attr("y", 6)
    .attr("dy", ".71em")
    .style("text-anchor", "end")
    .text("Entries/60")

svg.selectAll("div")
  .data(teamdata)
  .enter()
  .append("circle")
  .attr("class", "team")
  .style("stroke", function(d) { return d.hex; 
  })     
  .style("stroke-width", 2)
  .attr("r", 12)
  .attr("cx", function(d) { return xScale(d.carryinpercent); })
  .attr("cy", function(d) { return yScale(d.entriesper60); })
  .attr("fill", function(d) {
    return "url(#" + d.name + ")";

});
});











/*

//Width and height
var margin = {top: 20, right: 20, bottom: 30, left: 40};
var w = 960 - margin.left - margin.right;
var h = 500 - margin.top - margin.bottom;

//Create scale functions
var xScale = d3.scale.linear()
    .range([0, w]);

var yScale = d3.scale.linear()
    .range([h, 0]);

// var color = d3.scale.color();

// Define the Axis
var xAxis = d3.svg.axis()
    .scale(xScale)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(yScale)
    .orient("left");

//Create SVG element
var svg = d3.select("body")
            .append("svg")
            .attr("width", w + margin.left + margin.right)
            .attr("height", h + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");


//Load the TEAM data set
var teamdata = d3.tsv("team.tsv", function(error, teamdata) {
  if (error) throw error;

  teamdata.forEach(function(d) {
    d.entriesper60 = +d.entriesper60;
    d.carryinpercent = +d.carryinpercent;
  });

  xScale.domain(d3.extent(teamdata, function(d) { return d.carryinpercent; })).nice();
  yScale.domain(d3.extent(teamdata, function(d) { return d.entriesper60; })).nice();

//Create X axis
svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + h + ")")
      .call(xAxis)
    .append("text")
      .attr("class", "label")
      .attr("x", w)
      .attr("y", -6)
      .style("text-anchor", "end")
      .text("Carry-in %");

//Create Y axis
svg.append("g")
    .attr("class", "y axis")
    .call(yAxis)
  .append("text")
    .attr("class", "label")
    .attr("transform", "rotate(-90)")
    .attr("y", 6)
    .attr("dy", ".71em")
    .style("text-anchor", "end")
    .text("Entries/60")

svg.append("defs")
  .selectAll("pattern")
  .data(teamdata)
  .enter()
  .append("pattern")
  .attr('id', function(d, i) {
    return d.name;
  })
 // .attr('patternUnits', 'userSpaceOnUse')
  .attr('width', 20)
  .attr('height', 20)
  .append("image")
  .attr("xlink:href", function(d) {
    return d.image + d.name;
  })
  .attr('width', 20)
  .attr('height', 20)
  .attr("transform", "translate(2, 2)");

d3.select("svg")
  .append("g") // append the average line
    .attr("id", "x-axis") //
    .attr("transform", "translate(0,177)")
    .append("line")
    .attr("x1", "0")
    .attr("x2", "950");

//Create circles
svg.selectAll("circle")
  .data(teamdata)
  .enter()
  .append("circle")
  .attr("class", "team.circle")
  .style("stroke", function(d) { return d.hex; 
  })     
  .style("stroke-width", 2)
  .attr("r", 12)
  .attr("cx", function(d) { return xScale(d.carryinpercent); })
  .attr("cy", function(d) { return yScale(d.entriesper60); })
  .attr("fill", function(d) {
    return "url(#" + d.name + ")";

});



//On click, change to PLAYER data            
d3.select("#playerbtn")
.on("click", function() {
//New values for dataset
var playerdata = d3.tsv("player.tsv", function(error, playerdata) {
  if (error) throw error;

  playerdata.forEach(function(d) {
    d.entriesper60 = +d.entriesper60;
    d.carryinpercent = +d.carryinpercent;
  });

//Update scale domains
  xScale.domain(d3.extent(playerdata, function(d) { return d.carryinpercent; })).nice();
  yScale.domain(d3.extent(playerdata, function(d) { return d.entriesper60; })).nice();

//Update all circles
svg.selectAll("circle")
  .data(playerdata)
  .transition()
  .duration(500)
  .attr("class", "player.circle")
  .attr("r", 6)
  .attr("cx", function(d) { return xScale(d.carryinpercent); })
  .attr("cy", function(d) { return yScale(d.entriesper60); })
  .attr("fill", function(d) { return d.hex; });

//Enter new circles
svg.selectAll("circle")
  .data(playerdata)
  .enter()
  .append("circle")
  .attr("class", "player.circle")
  .attr("r", 6)
  .attr("cx", function(d) { return xScale(d.carryinpercent); })
  .attr("cy", function(d) { return yScale(d.entriesper60); })
  .attr("fill", function(d) { return d.hex; });

// Remove old
svg.selectAll("circle")
  .data(playerdata)
  .exit()
  .remove()

  // Update X Axis
svg.select(".x.axis")
    .transition()
    .duration(500)
    .call(xAxis);

// Update Y Axis
svg.select(".y.axis")
    .transition()
    .duration(500)
    .call(yAxis);
});
});


//On click, change to TEAM data            
d3.select("#teambtn")
.on("click", function() {
//New values for dataset
var teamdata = d3.tsv("team.tsv", function(error, teamdata) {
  if (error) throw error;

  teamdata.forEach(function(d) {
    d.entriesper60 = +d.entriesper60;
    d.carryinpercent = +d.carryinpercent;
  });

//Update scale domains
  xScale.domain(d3.extent(teamdata, function(d) { return d.carryinpercent; })).nice();
  yScale.domain(d3.extent(teamdata, function(d) { return d.entriesper60; })).nice();

//Update all circles
svg.selectAll("circle")
  .data(teamdata)
  .transition()
  .duration(500)
  .attr("class", "player.circle")
  .attr("r", 12)
  .attr("cx", function(d) { return xScale(d.carryinpercent); })
  .attr("cy", function(d) { return yScale(d.entriesper60); })
  .attr("fill", function(d) { return d.hex; });

//Enter new circles
svg.selectAll("circle")
  .data(teamdata)
  .enter()
  .append("circle")
  .attr("class", "player.circle")
  .attr("r", 12)
  .attr("cx", function(d) { return xScale(d.carryinpercent); })
  .attr("cy", function(d) { return yScale(d.entriesper60); })
  .attr("fill", function(d) { return d.hex; });

// Remove old
svg.selectAll("circle")
  .data(teamdata)
  .exit()
  .transition()
  .duration(500)
  .remove()

  // Update X Axis
svg.select(".x.axis")
    .transition()
    .duration(500)
    .call(xAxis);

// Update Y Axis
svg.select(".y.axis")
    .transition()
    .duration(500)
    .call(yAxis);
});
});
});

*/
</script>
</body>
</html>